{"ast":null,"code":"var _jsxFileName = \"/home/olfa/Documents/pfe-main/client/src/pages/Dashboard/ConversationUser/ChatInputSection/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Alert, Form } from \"reactstrap\";\n// components\nimport StartButtons from \"./StartButtons\";\nimport InputSection from \"./InputSection\";\nimport EndButtons from \"./EndButtons\";\nimport MoreMenu from \"./MoreMenu\";\nimport Reply from \"./Reply\";\n\n// interface\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Index = ({\n  onSend,\n  replyData,\n  onSetReplyData,\n  chatUserDetails,\n  sendMessageSocket\n}) => {\n  _s();\n  /*\n  more menu collapse\n  */\n  const [isOpen, setIsOpen] = useState(false);\n  const onToggle = () => {\n    setIsOpen(!isOpen);\n  };\n\n  /*\n  disable send button\n  */\n  const [disabled, setDisabled] = useState(true);\n\n  /*\n  input text\n  */\n  const [text, setText] = useState(null);\n  const onChangeText = value => {\n    setText(value);\n  };\n\n  /*\n  images\n  */\n  const [images, setImages] = useState();\n  const onSelectImages = images => {\n    setImages(images);\n  };\n\n  /*\n  files\n  */\n  const [files, setFiles] = useState();\n  const onSelectFiles = files => {\n    setFiles(files);\n  };\n  useEffect(() => {\n    if (text || images || files) {\n      setDisabled(false);\n    } else {\n      setDisabled(true);\n    }\n  }, [text, images, files]);\n  const onSubmit = () => {\n    let data = {};\n    if (text) {\n      data[\"text\"] = text;\n    }\n    //sendMessageSocket(text,chatUserDetails.id.toString())\n    if (images && images.length) {\n      const imgs = (images || []).map((i, key) => {\n        const src = URL.createObjectURL(i);\n        return {\n          id: key + 1,\n          downloadLink: src\n        };\n      });\n      data[\"image\"] = imgs;\n    }\n    if (files && files.length) {\n      const fs = (files || []).map((f, key) => {\n        const src = URL.createObjectURL(f);\n        return {\n          id: key + 1,\n          name: f.name,\n          downloadLink: src,\n          desc: f.size\n        };\n      });\n      data[\"attachments\"] = fs;\n    }\n    setText(\"\");\n    setImages(null);\n    setFiles(null);\n    onSend(data);\n  };\n  const onClearMedia = () => {\n    setImages(null);\n    setFiles(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-input-section p-3 p-lg-4\",\n    children: [/*#__PURE__*/_jsxDEV(Form, {\n      id: \"chatinput-form\",\n      onSubmit: e => {\n        e.preventDefault();\n        onSubmit();\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row g-0 align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-auto\",\n          children: /*#__PURE__*/_jsxDEV(StartButtons, {\n            onToggle: onToggle,\n            text: text,\n            onChange: onChangeText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(InputSection, {\n            value: text,\n            onChange: onChangeText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-auto\",\n          children: /*#__PURE__*/_jsxDEV(EndButtons, {\n            onSubmit: onSubmit,\n            disabled: disabled\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), images && images.length || files && files.length ? /*#__PURE__*/_jsxDEV(Alert, {\n      isOpen: true,\n      toggle: onClearMedia,\n      color: \"secondary\",\n      className: \"alert-dismiss-custom  rounded-pill font-size-12 mb-1 selected-media\",\n      closeClassName: \"selected-media-close\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"me-2 mb-0\",\n        children: [images && !files && ` You have selected ${images.length} images`, files && !images && ` You have selected ${files.length} files`, files && images && ` You have selected ${files.length} files & ${images.length} images.`]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(MoreMenu, {\n      isOpen: isOpen,\n      onSelectImages: onSelectImages,\n      onSelectFiles: onSelectFiles,\n      onToggle: onToggle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Reply, {\n      reply: replyData,\n      onSetReplyData: onSetReplyData,\n      chatUserDetails: chatUserDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n_s(Index, \"Xf02sQebeIuRSgbQHZ2h6newKKo=\");\n_c = Index;\nexport default Index;\nvar _c;\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"names":["React","useEffect","useState","Alert","Form","StartButtons","InputSection","EndButtons","MoreMenu","Reply","jsxDEV","_jsxDEV","Index","onSend","replyData","onSetReplyData","chatUserDetails","sendMessageSocket","_s","isOpen","setIsOpen","onToggle","disabled","setDisabled","text","setText","onChangeText","value","images","setImages","onSelectImages","files","setFiles","onSelectFiles","onSubmit","data","length","imgs","map","i","key","src","URL","createObjectURL","id","downloadLink","fs","f","name","desc","size","onClearMedia","className","children","e","preventDefault","onChange","fileName","_jsxFileName","lineNumber","columnNumber","toggle","color","closeClassName","reply","_c","$RefreshReg$"],"sources":["/home/olfa/Documents/pfe-main/client/src/pages/Dashboard/ConversationUser/ChatInputSection/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Alert, Form } from \"reactstrap\";\n// components\nimport StartButtons from \"./StartButtons\";\nimport InputSection from \"./InputSection\";\nimport EndButtons from \"./EndButtons\";\nimport MoreMenu from \"./MoreMenu\";\nimport Reply from \"./Reply\";\n\n// interface\nimport { MessagesTypes } from \"../../../../data/messages\";\nimport { useProfile } from \"../../../../hooks\";\n\ninterface IndexProps {\n  onSend: (data: any) => void;\n  replyData: null | MessagesTypes | undefined;\n  onSetReplyData: (reply: null | MessagesTypes | undefined) => void;\n  chatUserDetails: any;\n  sendMessageSocket : any;\n}\nconst Index = ({\n  onSend,\n  replyData,\n  onSetReplyData,\n  chatUserDetails,\n  sendMessageSocket\n}: IndexProps) => {\n  /*\n  more menu collapse\n  */\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const onToggle = () => {\n    setIsOpen(!isOpen);\n  };\n\n  /*\n  disable send button\n  */\n  const [disabled, setDisabled] = useState<boolean>(true);\n\n  /*\n  input text\n  */\n  const [text, setText] = useState<null | string>(null);\n  const onChangeText = (value: string) => {\n    setText(value);\n  };\n\n  /*\n  images\n  */\n  const [images, setImages] = useState<Array<any> | null | undefined>();\n  const onSelectImages = (images: Array<any>) => {\n    setImages(images);\n  };\n\n  /*\n  files\n  */\n  const [files, setFiles] = useState<Array<any> | null | undefined>();\n  const onSelectFiles = (files: Array<any>) => {\n    setFiles(files);\n  };\n  useEffect(() => {\n    if (text || images || files) {\n      setDisabled(false);\n    } else {\n      setDisabled(true);\n    }\n  }, [text, images, files]);\n\n  const onSubmit = () => {\n    let data: any = {};\n    if (text) {\n      data[\"text\"] = text;\n    }\n    //sendMessageSocket(text,chatUserDetails.id.toString())\n    if (images && images.length) {\n      const imgs = (images || []).map((i: any, key: number) => {\n        const src = URL.createObjectURL(i);\n        return {\n          id: key + 1,\n          downloadLink: src,\n        };\n      });\n      data[\"image\"] = imgs;\n    }\n\n    if (files && files.length) {\n      const fs = (files || []).map((f: any, key: number) => {\n        const src = URL.createObjectURL(f);\n        return {\n          id: key + 1,\n          name: f.name,\n          downloadLink: src,\n          desc: f.size,\n        };\n      });\n      data[\"attachments\"] = fs;\n    }\n\n    setText(\"\");\n    setImages(null);\n    setFiles(null);\n    onSend(data);\n  };\n\n  const onClearMedia = () => {\n    setImages(null);\n    setFiles(null);\n  };\n  return (\n    <div className=\"chat-input-section p-3 p-lg-4\">\n      <Form\n        id=\"chatinput-form\"\n        onSubmit={(e: any) => {\n          e.preventDefault();\n          onSubmit();\n        }}\n      >\n        <div className=\"row g-0 align-items-center\">\n          <div className=\"col-auto\">\n            <StartButtons\n              onToggle={onToggle}\n              text={text}\n              onChange={onChangeText}\n            />\n          </div>\n          <div className=\"col\">\n            <InputSection value={text} onChange={onChangeText} />\n          </div>\n          <div className=\"col-auto\">\n            <EndButtons onSubmit={onSubmit} disabled={disabled} />\n          </div>\n        </div>\n      </Form>\n\n      {(images && images.length) || (files && files.length) ? (\n        <Alert\n          isOpen={true}\n          toggle={onClearMedia}\n          color=\"secondary\"\n          className=\"alert-dismiss-custom \n        rounded-pill font-size-12 mb-1 selected-media\"\n          closeClassName=\"selected-media-close\"\n        >\n          <p className=\"me-2 mb-0\">\n            {images && !files && ` You have selected ${images.length} images`}\n            {files && !images && ` You have selected ${files.length} files`}\n            {files &&\n              images &&\n              ` You have selected ${files.length} files & ${images.length} images.`}\n          </p>\n        </Alert>\n      ) : null}\n\n      <MoreMenu\n        isOpen={isOpen}\n        onSelectImages={onSelectImages}\n        onSelectFiles={onSelectFiles}\n        onToggle={onToggle}\n      />\n\n      <Reply\n        reply={replyData}\n        onSetReplyData={onSetReplyData}\n        chatUserDetails={chatUserDetails}\n      />\n    </div>\n  );\n};\n\nexport default Index;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}